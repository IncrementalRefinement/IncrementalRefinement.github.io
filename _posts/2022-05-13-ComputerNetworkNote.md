---
layout: post
title: Computer Network Note
tags: [ComputerNetwork]
---

我一直觉得我的计网学的不好，不是说我不能搞懂那一个个离散的协议的具体规范，不能熟练背诵且讲述tcp的状态机，不能默写http header各字段的(当然我确实不能),而是说我没有将这些零散的知识点拼凑起来，建立起一个整体的计网的思维架构。

于是我抽空快速把自顶向下的配套课程看了一遍，尝试补足这一方面的缺陷。

## 一些想法

我觉得计算机网络这门学科/技术的目的，是实现不同抽象级别的通信，我们常说计算机网络的架构是分层的。七层、五层、四层模型，将模型分层一方面是一种设计模式，通过分层划分各层次的职责以及层与层之间的接口方便整个架构的维护和扩展；另一方面不同层次之间通信的抽象程度也不相同，从物理信号到比特流到字符流，再到一整块文本，不同层次的协议便利了上层的应用开发。每一层协议在设计的时候需要考虑下一层能为其提供的**服务模型**

所以这篇笔记就说一下我理解计网架构吧，这里采用授课时通常采用的五层模型，自顶向下地讲述。

## Application Layer

这一层主要解决的问题是，我们在互联网中存在许多应用，如果每次开发一个新的应用时，我们都要在传输层的提供的字符串传输服务上重新开发一套规范，来定义我们的应用该如何解释这些字符串，无疑是很麻烦的。有一些应用具有普适性的，比如 Web、DNS、P2P 等等，我们将这些应用归类，将他们的共同特征提取出来，制定协议满足这些应用的需求，HTTP、DNS 等应用层协议也就产生了。无所谓对错，你也可以自己定义你想要的应用层协议，一些 RPC 框架也是这样做的。

## Transport Layer

这一层主要解决的问题是如何实现进程与进程之间的通信。

## Network Layer

应用层和传输层协议的聚焦点都在 Network edge 上，而 Network Layer 的聚焦点在 Network core 上。Network edge 的视角下，我们看到的通信实体是server主机，client主机，server主机上的进程，client主机上的进程，但是这些主机之间间隔着众多网络，链路。呢么这些通信实体是如何在一个非常复杂的网络拓扑上实现通信的呢？这就是网络层尝试解决的问题 ----- 规划并实现不同网络之间的路由。

## Link Layer

Network Layer 解决了不同网络之间的路由，而链路层解决同一个网络之间不同设备之间的通信问题，链路层协议不涉及三层及以上的实体。链路层需要在各式各样的物理链路上实现传输，不同的链路具有不同的特性，如果是单对单、单向的链路，那么问题并不复杂，但是如果在一条链路之间涉及多个通信实体，或者要实现双工的通信，那么问题就产生了。此外数据链路层也提供了定的差错检测、纠错等能力。

要完全理解链路层存在的必要，其实还要在历史演进的视角上看问题，比如 ["为什么局域网要用mac地址而不直接使用IP地址，统一用IP地址不是更好吗？"](https://www.zhihu.com/question/21011060/answer/149852833) 这样的问题。计算机网络的分层架构是一个设计与实行相辅相成的过程，而不是蹦出一个 over design 的设计然后所有人照着设计按部就班实行就完事了。

## Physic Layer

在我的理解下，物理层做的事就是在逻辑的比特流与现实世界中存在的各种物理信号之间进行转换，并将其进行传输。

说起来很惭愧，作为一个EE的学生，电磁场与电磁波，射频信号，调制解调我已经全忘了，所以我也就不再这里献丑了。

## Random Thoughts

我一直觉得，在那本经典的 computer network a top down approach 的教材之外，还应该有一本 a system approach 或者 a history approach，从整个计算网络的历史演进/系统设计上来教授计算机网络这门学科。

这次重新温习了一遍计网时，我的关注点常常在系统设计上，诸如 packet switching， circuit switching 在面对不同通信负载时的性能表现；网络层实现路由算法时分布式/集中实现的取舍，链路层实现 MAC(Multiple Access Control) 时的不同 approach 的优劣等等。[自顶向下这本书之外的课程资源](https://gaia.cs.umass.edu/kurose_ross/index.php)很有意思，大家有空可以去看一看。
